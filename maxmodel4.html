<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>arduivis by cskonopka</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56095763-1', 'auto');
  ga('send', 'pageview');

</script>    
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1><a href="http://cskonopka.github.io/arduivis/">arduivis</h1>
        <p>modular microcontroller programming for visual programming languages</p>


        <p class="view"><a href="https://github.com/cskonopka/arduivis">View this Project on GitHub </a></p>
        
          
              <ul>         
              <a href="http://cskonopka.github.io/arduivis/maxmodels"><strong>MaxMSP</strong><strong>Models</strong></a>
          </ul>
          <ul>
             <a href="http://cskonopka.github.io/arduivis/pdmodels"><strong>Pure Data</strong><strong>Models</strong></a>
          </ul>
   
      </header>
      <section>
<!--         <h3>
 -->

<!-- <pre><code>$ cd cskonopka/arduivis
$ git fetch origin
$ git checkout gh-pages
</code></pre>

<p>If you're using the GitHub for Mac, simply sync your repository and you'll see the new branch.</p>
 -->




<!-- <a name="rather-drive-stick" class="anchor" href="#rather-drive-stick"><span class="octicon octicon-link"></span></a>Methodology</h3>

<p>Each model represents a way to interact with an Arduino via a visual programming language. 

Currently there are 6 models that make up arduivis.</p>
  <ul>
    <li>model #1: output</li>
    <li>model #2: input</li>
    <li>model #3: feedback</li>
    <li>model #4: multiple ouputs</li>
    <li>model #5: multiple inputs</li>
    <li>model #6: multiple feedbacks</li>
  </ul> -->
<!-- 
<h3>
<a name="rather-drive-stick" class="anchor" href="#rather-drive-stick"><span class="octicon octicon-link"></span></a>Getting Started</h3>

 -->

 <h3>
<a name="rather-drive-stick" class="anchor" href="#rather-drive-stick"><span class="octicon octicon-link"></span></a>MaxMSP Model #4: Multiple Outputs</h3>

<p><b>Arduino</b></p>
 <pre><code>/* 

~~~~~~~ arduivis - MaxMSP ~~~~~~~~
~~~~~ model#4: multiple outputs ~~~~~

MaxMSP: arduivis_model4_MaxMSP_multipleOutputs.maxpat

This is an example of how to use a loop to write
several streams of data to MaxMSP, from an Arduino.
A fading LED is used to provide visual feedback for
this process.

synthesized by Christopher Konopka

This example code is in the public domain.

*/

void setup() 
{ 
  // Create/open serial port
  Serial.begin(9600);  

  // Define LED mode 
  // PWM LED  
  pinMode(3, OUTPUT);     
  pinMode(5, OUTPUT);     
  pinMode(6, OUTPUT);     
  pinMode(9, OUTPUT);     
}

void loop() 
{ 
  // Loop variables
  int lp;
  int startIncrement = 0; 
  int incrementLoopRange = 255; 
  int startDecrement = 255;
  int decrementLoopRange = 0;
        

  // Loop Function        
  lp = loopSystem(startIncrement, incrementLoopRange, startDecrement, decrementLoopRange);

}

int loopSystem(int startIncrement, int incrementLoopRange, int startDecrement, int decrementLoopRange)
{
  int lp;

  // Loop #1
  // Incremental Loop
  for(lp = startIncrement; lp < incrementLoopRange; lp++)         
  {
    // Incremental loop values to LED
    // Controls fade of 4 LEDs
    analogWrite(3, lp);    
    analogWrite(5, lp);
    analogWrite(6, lp);
    analogWrite(9, lp);

      // Incremental loop values to serial buffer
      // [serial] object
      // to MaxMSP, from Arduino
      Serial.print(lp);
      Serial.print(" ");
      Serial.print(lp);
      Serial.print(" ");
      Serial.print(lp);
      Serial.print(" ");
      Serial.println(lp);

        delay(10);
  }

  // Loop #2
  // Decremental Loop
  for(lp = startDecrement; lp > decrementLoopRange; lp--)    
  {
    // Deremental loop values to LED
    // Controls fade of 4 LEDs
    analogWrite(3, lp);    
    analogWrite(5, lp);
    analogWrite(6, lp);
    analogWrite(9, lp);

      // Decremental loop values to serial buffer
      // [serial] object
      // to MaxMSP, from Arduino  
      Serial.print(lp);    
      Serial.print(" ");      
      Serial.print(lp);
      Serial.print(" ");      
      Serial.print(lp);
      Serial.print(" ");      
      Serial.println(lp);

        delay(10);
  }
}
</code></pre>

<!-- <p>This is an example of how to parse a single stream of data. The modular piece of code below represents the information that is packed and then set to the serial buffer. This data is read by the Arduino using the Serial.ParseInt() section of code.</p> -->

<!-- <img src="http://cskonopka.github.io/arduivis/arduivis_MaxMSP_model2_input_pak.png" alt="some_text">
 -->
<!-- <p>The data is first sent from a number box within Max and then to a [pak] object. This information is then packed into a message which is fed to an [atoi] object. The [atoi] takes the incoming message and then converts the ASCii message into an integer so it can be read by the Arduino. Instead of sending this newly packed message into the first inlet of the [atoi] object, I chose to use the third inlet. If you were to place the packed message in the first inlet while the [serial] object is being polled for information, whenever a new message is sent to the serial buffer, there will be a moment where the buffer becomes clogged. By sending the information into the third inlet, the [atoi] object holds the data until it is polled by the [metro] polling the [serial] object. This idea can be seen in full in the completed patch on the following page.</p>

 -->


<p><b>MaxMSP</b></p>

<p><em>Presentation Mode</em></p>
       <img src="http://cskonopka.github.io/arduivis/arduivis_MaxMSP_model4_multipleOutputs.png" alt="some_text">

<p><em>Edit Mode</em></p>
       <img src="http://cskonopka.github.io/arduivis/arduivis_MaxMSP_model4_multipleOutputs_inside.png" alt="some_text">




<!--   <ul>
    <li>Next, open the folder named "model1_output"</li>
      <ul>
        <li> arduivis > MaxMSP > model1_output</li>
        <li> arduivis > PD > model1_output</li>
      </ul>
  </ul>  

  <ul>
    <li>Inside "model1_output" there will be a patch for the VPL and a folder containing the Arduino sketch for this example</li>
      <ul>
        <li>Open the sketch "arduivis_MaxMSP_model1_output.ino" in the Arduino IDE</li>
        <li>Upload the sketch to the Arduino</li>
      </ul>
  </ul>     -->

<!-- 
  <ul>
    <li>For MaxMSP, find the folder model #1</li>
      <ul>
        <li> arduivis > MaxMSP > model1_output</li>
      </ul>
  </ul> -->

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/cskonopka">cskonopka</a></p>

      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>